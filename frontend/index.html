<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Book Tracker Admin</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-5 bg-light">

  <div class="container">
    <h1 class="mb-4">ðŸ“š Book Tracker Admin</h1>

    <form id="bookForm" class="card p-4 mb-4 shadow-sm bg-white">
      <h4>Add a Book</h4>
      <div class="mb-3">
        <label for="title" class="form-label">Title</label>
        <input type="text" id="title" class="form-control" required>
      </div>
      <div class="mb-3">
        <label for="author" class="form-label">Author</label>
        <input type="text" id="author" class="form-control">
      </div>
      <div class="form-check mb-2">
        <input type="checkbox" class="form-check-input" id="owned">
        <label class="form-check-label" for="owned">I own this book</label>
      </div>
      <div class="form-check mb-2">
        <input type="checkbox" class="form-check-input" id="read">
        <label class="form-check-label" for="read">I have read this book</label>
      </div>
      <div class="form-check mb-3">
        <input type="checkbox" class="form-check-input" id="tbr">
        <label class="form-check-label" for="tbr">To Be Read</label>
      </div>
      <button type="submit" class="btn btn-primary">Add Book</button>
    </form>

    <h4>All Books</h4>
    <table class="table table-bordered bg-white shadow-sm" id="booksTable">
      <thead>
        <tr>
          <th>Title</th>
          <th>Author</th>
          <th>Owned</th>
          <th>Read</th>
          <th>TBR</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    const API_BASE = "http://localhost:5000/api/books";

    // Submit form
    document.getElementById('bookForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const newBook = {
        title: document.getElementById('title').value,
        author: document.getElementById('author').value,
        owned: document.getElementById('owned').checked,
        read: document.getElementById('read').checked,
        tbr: document.getElementById('tbr').checked
      };

      await fetch(API_BASE, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(newBook)
      });

      e.target.reset();
      loadBooks();
    });

    // Load books into the table
    async function loadBooks() {
      const res = await fetch(API_BASE);
      const books = await res.json();

      const table = document.querySelector('#booksTable tbody');
      table.innerHTML = '';
      books.forEach(book => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${book.title}</td>
          <td>${book.author || ''}</td>
          <td>${book.owned ? 'âœ…' : ''}</td>
          <td>${book.read ? 'âœ…' : ''}</td>
          <td>${book.tbr ? 'âœ…' : ''}</td>
        `;
        table.appendChild(row);
      });
    }

    loadBooks();
  </script>
</body>
</html>
